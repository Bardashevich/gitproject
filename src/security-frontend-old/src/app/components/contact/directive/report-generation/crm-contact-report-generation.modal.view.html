<crm-form-wrapper form-title="vm.title" submit-text="{{fileGenerationForm.$valid?'Ok':null}}" cancel-text="Cancel"
                  submit-btn="vm.reportGenerateBundle.createReports(vm.checkedItemsIds, vm.fileType)"
                  cancel-btn="vm.cancel()" modal="true" ng-form="fileGenerationForm">
    <div class="form-group crm-select-validation-icon" crm-input-validation>
        <label for="fileType">File Type</label>
        <select ng-model="vm.fileType"
                id="fileType"
                name="fileType"
                class="form-control"
                ng-options="option.name as option.value for option in vm.fileTypes">
            <option value="">Please, select</option>
        </select>
    </div>
    <div ng-show="vm.reportGenerateBundle.itemsList.length !== 0">
        <h4>Generated Reports<span>
            <button class="btn btn-primary pull-right" ng-click="vm.reportGenerateBundle.download(vm.fileType)">
            <span class="glyphicon glyphicon-download-alt"/> Download</button>
        </span>
        </h4>

        <table class="table table-condensed crm-table-fixed">
            <thead ng-show="vm.reportGenerateBundle.itemsList.length > 1">
            <tr>
                <th class="crm-narrow">
                    <input type="checkbox" ng-model="vm.reportGenerateBundle.isSelectedAll"
                           ng-click="vm.reportGenerateBundle.selectAll(vm.reportGenerateBundle.isSelectedAll)"></th>
                <th class="crm-hover col-sm-12 col-xs-6"></th>
            </tr>
            </thead>
            <tbody>
            <tr class="crm-hover"
                ng-repeat="report in vm.reportGenerateBundle.itemsList">
                <td ng-show="vm.reportGenerateBundle.itemsList.length > 1">
                    <input type="checkbox" ng-model="report.checked"
                           ng-click="vm.reportGenerateBundle.selectOne();$event.stopPropagation()">
                <td>{{report.fileName}}</td>
            </tr>
            </tbody>
        </table>
    </div>
</crm-form-wrapper>

<div>
    <div class="row">
        <div class="col-md-12">
            <div class="form-group " crm-input-validation>
                <label for="task-name">Name</label>
                <input id="task-name" type="text" name="taskName" class="form-control" ng-model="vm.task.name" required ng-readonly="!vm.canEdit">
                <span ng-show="taskForm.taskName.$dirty && taskForm.taskName.$error.required" class="help-block">Task name is required</span>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <div class="form-group" crm-input-validation>
                <label for="task-location">Location</label>
                <input id="task-location" type="text" name="taskLocation" class="form-control" ng-model="vm.task.location" ng-maxlength="500" ng-readonly="!vm.canEdit">
                <span ng-show="taskForm.taskName.$dirty && taskForm.taskName.$error.required" class="help-block">Task location is required</span>
            </div>
        </div>
    </div>
    <div class="row">
        <div ng-show="vm.canEdit" class="col-md-1">
            <div class="form-group">
                <label for="timeless">Timeless</label>
                <input id="timeless" type="checkbox" class="timeless" ng-change="vm.onTimeless()" ng-model="vm.timeless" value="Timeless">
            </div>
        </div>
        <div ng-class="vm.canEdit ? 'col-md-11' : 'col-md-12'">
            <div class="row datetime-group">
                <input name="periodValid" ng-model=" vm.isEndDateInvalid" class="form-control hidden" crm-date-period-validation>
                <div class="col-md-5">
                    <crm-date-time-picker model="vm.task.startDate"
                                          label="Start date/time"
                                          onchange="vm.onStartDateTimeChange(newValue, isDate)"
                                          is-edit="vm.canEditDateTime">

                    </crm-date-time-picker>
                </div>
                <div class="col-md-5">
                    <crm-date-time-picker model="vm.task.endDate"
                                          label="End date/time "
                                          error-text="vm.dateErrorText"
                                          not-valid="vm.isEndDateInvalid"
                                          onchange="vm.onEndDateTimeChange(newValue, isDate)"
                                          is-edit="vm.canEditDateTime">

                    </crm-date-time-picker>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-6 form-group">
            <label for="task-status">Status</label>
            <select id="task-status" class="form-control" ng-model="vm.task.status" ng-disabled="!vm.canEdit"
                    ng-options="x as x.name for x in vm.statuses track by x.id"></select>
        </div>
        <div class="col-md-6 form-group">
            <label for="task-priority">Priority</label>
            <select id="task-priority" class="form-control" ng-model="vm.task.priority" ng-disabled="!vm.canEdit"
                    ng-options="x as x.name for x in vm.priorities track by x.id"></select>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12 form-group">
            <label for="task-assignee">Assignee</label>
            <ui-select id="task-assignee" ng-model="vm.task.assignee" title="assignee ...">
                <ui-select-match placeholder="Select or search person...">{{$select.selected | fullName}}</ui-select-match>
                <ui-select-choices
                    repeat="person in vm.assigns | filter: $select.search | orderBy : ['firstName', 'lastName'] track by person.id">
                    <span ng-bind-html="person | fullName | highlight: $select.search"></span>
                    <small ng-bind-html="person.code | highlight: $select.search"></small>
                </ui-select-choices>
            </ui-select>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <div class="form-group">
                <label for="task-description">Details</label>
                <textarea id="task-description" class="form-control" ng-model="vm.task.description" rows="7" ng-maxlength="500"></textarea>
            </div>
        </div>
    </div>
    <crm-task-comments></crm-task-comments>

</div>
